# 🖼️ 이미지 딸깍툴

Python으로 작성된 고급(아님) 이미지 배경 제거 및 애니메이션 생성 도구입니다.

## ✨ 주요 기능

### 🗑️ 배경 제거
- **AI 모델 선택**: 7가지 모델 지원
  - U²-Net (범용)
  - U²-Net-P (도트픽셀 최적, 추천)
  - U²-Net Human (사람 전용)
  - Silueta (고정밀)
  - ISNet (최신, 고성능)
  - SAM (Segment Anything)
  - BiRefNet (최고 품질)
- **Alpha Matting**: 경계 개선 기술 (선택적)
- **이미지 리사이즈**: 비율 유지 또는 강제 변경
- **일괄 처리**: 폴더 내 모든 이미지 자동 처리
- **📋 QUEUE 시스템**: 여러 폴더를 대기열에 추가하여 순차 처리

### 🎬 애니메이션 생성
- **지원 형식**: WebP, GIF
- **잔상 방지**: 프레임 크기 통일 및 disposal 설정
- **품질 조절**: 압축 품질, 프레임 지속시간 설정
- **무한 반복**: 루프 애니메이션 지원
- **📋 QUEUE 시스템**: 여러 폴더를 대기열에 추가하여 순차 처리

### 🎨 사용자 인터페이스
- **모던 GUI**: tkinter 기반 직관적 인터페이스
- **드래그 앤 드롭**: 폴더 선택 간편화
- **실시간 로그**: 처리 상황 실시간 확인
- **진행률 표시**: 시각적 진행 상황 표시

## 🔧 설치 방법 (Windows 완전 초보자 가이드)

### 1단계: Python 설치
1. **Python 다운로드**: https://www.python.org/downloads/
2. **버전 선택**: Python 3.8 이상 (권장: 최신 안정 버전)(개발자는 3.10.7버전 사용함)
3. **설치 시 주의사항**:
   - ✅ **"Add Python to PATH" 체크박스를 반드시 선택!**
   - ✅ "Install for all users" 권장
4. **설치 확인**:
   - `Win + R` → `cmd` 입력 → Enter
   - `python --version` 입력하여 버전 확인

### 2단계: Git 설치 (선택적)
1. **Git 다운로드**: https://git-scm.com/download/win
2. **설치**: 모든 옵션을 기본값으로 설치
3. **설치 확인**: 명령 프롬프트에서 `git --version`

### 3단계: 프로젝트 다운로드

#### 방법 A: Git 사용 (권장)
1. **폴더 생성**: 원하는 위치에 작업 폴더 생성 (예: `C:\Projects`)
2. **명령 프롬프트 열기**:
   - 생성한 폴더에서 `Shift + 우클릭` → "여기서 PowerShell 창 열기"
   - 또는 `Win + R` → `cmd` → `cd C:\Projects`
3. **저장소 복제**:
```bash
git clone https://github.com/your-repo/image-tool.git
cd image-tool
```

#### 방법 B: 직접 다운로드
1. **GitHub 페이지**에서 "Code" → "Download ZIP" 클릭
2. **압축 해제**: 다운로드한 ZIP 파일을 원하는 폴더에 압축 해제
3. **폴더 이동**: 압축 해제된 폴더로 이동

### 4단계: 자동 설치 및 실행 (권장)
1. **run.bat 파일 더블클릭**: 프로젝트 폴더에서 `run.bat` 더블클릭
2. **자동 처리**: 
   - 배치 파일이 필요한 패키지를 자동으로 설치
   - 최초 실행 시 인터넷 연결이 필요합니다
   - 설치 과정에서 몇 분 정도 소요될 수 있습니다
   - 설치 완료 후 자동으로 프로그램 실행

### 5단계: 수동 설치 (자동 설치가 안될 경우)
```bash
# 필수 패키지 설치
pip install rembg pillow tkinterdnd2

# Alpha Matting 기능 (선택적, 고급 경계 처리)
pip install pymatting opencv-python scipy
```

### 📦 패키지별 설명
- **rembg**: AI 배경 제거 라이브러리
- **pillow**: 이미지 처리 라이브러리  
- **tkinterdnd2**: 드래그 앤 드롭 지원
- **pymatting**: Alpha Matting 경계 개선 (선택적)
- **opencv-python**: 컴퓨터 비전 라이브러리 (선택적)
- **scipy**: 과학 계산 라이브러리 (선택적)

## 🚀 실행 방법

### 방법 1: 배치 파일 실행 (가장 쉬운 방법, 권장)
1. **run.bat** 파일을 더블클릭
2. 자동으로 패키지 확인 및 설치 후 프로그램 실행

### 방법 2: 명령 프롬프트에서 배치 파일 실행
1. **명령 프롬프트 열기**: 프로젝트 폴더에서 `Shift + 우클릭` → "여기서 PowerShell 창 열기"
2. **실행**:
```bash
run.bat
```

### 방법 3: Python 직접 실행 (고급 사용자용)
```bash
python start.py
```
또는
```bash
python remove_bg.py
```

### ⚠️ 실행 안될 때 확인사항
1. **run.bat 파일 존재**: 프로젝트 폴더에 `run.bat` 파일이 있는지 확인
2. **Python PATH 설정**: `python --version` 명령어가 작동하는지 확인
3. **파일 위치**: `run.bat`, `start.py`, `remove_bg.py` 파일이 모두 같은 폴더에 있는지 확인

## 📖 사용 가이드

### 배경 제거 사용법 (QUEUE 시스템)
#### 🔄 기본 사용법
1. **폴더 추가**: 
   - **드래그 앤 드롭**: 여러 폴더를 동시에 드래그해서 드롭존에 놓기 (자동으로 순차 추가)
   - **"➕ 추가" 버튼**: 다중 폴더 선택 창에서 여러 폴더를 선택하여 대기열에 추가
2. **대기열 관리**: 
   - "➖ 제거": 선택한 폴더를 대기열에서 제거
   - "🗑️ 전체 삭제": 대기열 모든 폴더 삭제
3. **AI 모델 선택**: 이미지 유형에 맞는 모델 선택
   - 도트픽셀: U²-Net-P 권장
   - 사람: U²-Net Human 권장
   - 범용: BiRefNet (최고 품질) 또는 ISNet 권장
4. **옵션 설정**:
   - 리사이즈: 필요시 체크 및 크기 설정
   - Alpha Matting: 더 정확한 경계가 필요한 경우 체크
5. **큐 처리 시작**: "🚀 배경 제거 시작" 버튼 클릭 (대기열의 모든 폴더를 순차 처리)
6. **결과 확인**: 프로그램 폴더 내 `transparent/{폴더명}/` 경로에 PNG 파일들 생성

#### 📋 QUEUE 시스템 특징
- **다중 폴더 처리**: 한 번에 여러 폴더를 처리 대기열에 등록
- **다중 폴더 선택**: 드래그 앤 드롭이나 폴더 선택 시 여러 폴더를 동시에 선택 가능
- **순차 처리**: 등록된 순서대로 폴더를 하나씩 처리
- **실시간 진행률**: 전체 큐 진행률과 개별 폴더 처리 상황 표시
- **자동 추가**: 드래그 앤 드롭한 폴더는 자동으로 대기열에 추가
- **스마트 필터링**: 이미지가 없는 폴더나 파일은 자동으로 제외
- **중복 처리**: 폴더명이 중복될 경우 자동으로 `폴더명_2`, `폴더명_3` 형태로 생성

### Alpha Matting 설정 가이드
- **전경 임계값 (270)**: 높을수록 전경 감지 정확도 증가
- **배경 임계값 (10)**: 낮을수록 배경 감지 정확도 증가  
- **침식 크기 (10)**: 경계 부드러움 정도 조절

### 애니메이션 생성 사용법 (QUEUE 시스템)
1. **폴더 추가**: 
   - **드래그 앤 드롭**: 여러 폴더를 동시에 드래그해서 드롭존에 놓기 (자동으로 순차 추가)
   - **"➕ 추가" 버튼**: 다중 폴더 선택 창에서 여러 폴더를 선택하여 애니메이션 대기열에 추가
2. **대기열 관리**: 
   - "➖ 제거": 선택한 폴더를 대기열에서 제거
   - "🗑️ 전체 삭제": 대기열 모든 폴더 삭제
3. **설정 조정**:
   - 형식: WebP (권장) 또는 GIF
   - 프레임 지속시간: 밀리초 단위 (100ms 권장)
   - 품질: 1-100 (80 권장)
   - 잔상 방지: 권장 (체크)
4. **큐 처리 시작**: "🎬 애니메이션 생성" 버튼 클릭 (대기열의 모든 폴더를 순차 처리)
5. **결과 확인**: 프로그램 폴더 내 `animation/` 경로에 `폴더명.gif` 또는 `폴더명.webp` 파일 생성
   - 파일명이 중복될 경우 자동으로 `폴더명_2.webp`, `폴더명_3.gif` 형태로 저장

## 🎯 성능 최적화 팁

### AI 모델 선택 가이드
- **속도 우선**: u2netp → u2net → silueta
- **품질 우선**: birefnet-general → isnet-general → silueta
- **메모리 절약**: u2netp (도트픽셀에도 최적)

### Alpha Matting 사용 시점
- ✅ **사용 권장**: 복잡한 머리카락, 반투명 객체, 섬세한 경계
- ❌ **사용 비권장**: 단순한 형태, 도트픽셀, 속도 우선 시

### 처리 속도 개선
- 큰 이미지는 리사이즈 후 처리
- Alpha Matting 대신 고품질 모델 사용
- 일괄 처리로 여러 이미지 동시 처리

## 📁 프로젝트 구조
```
removebg/
├── README.md           # 이 파일 (설치 및 사용법)
├── run.bat            # Windows 실행 배치 파일 (더블클릭으로 실행)
├── start.py           # 자동 설치 및 실행 스크립트
├── remove_bg.py       # 메인 프로그램
├── transparent/       # 배경 제거 결과물 저장 (자동 생성)
│   └── {폴더명}/      # 처리한 폴더별로 구분
│       └── *.png      # 투명 배경 이미지들
└── animation/         # 애니메이션 결과물 저장 (자동 생성)
    └── 폴더명.gif/webp # 생성된 애니메이션 파일
```

## 🎬 초보자를 위한 단계별 사용 가이드

### 처음 사용하는 분들을 위한 완전 가이드

#### 1️⃣ 설치하기
1. Python 설치 (위의 "1단계: Python 설치" 참조)
2. 프로젝트 다운로드 (ZIP 다운로드가 가장 쉬움)
3. 압축 해제 후 폴더 열기
4. **`run.bat` 더블클릭** → 자동 설치 및 실행 시작

#### 2️⃣ 배경 제거하기
1. 프로그램이 실행되면 "🗑️ 배경 제거" 탭 확인
2. 처리할 이미지들이 들어있는 폴더를 드래그해서 드롭존에 놓기
3. AI 모델은 기본값(u2netp) 사용 권장
4. "🚀 배경 제거 시작" 버튼 클릭
5. 완료되면 프로그램 폴더 내 `transparent/{폴더명}/` 경로에 PNG 파일들 생성됨

#### 3️⃣ 애니메이션 만들기
1. "🎬 애니메이션 생성" 탭 클릭
2. 순서대로 정렬된 이미지들이 있는 폴더 선택
3. 설정은 기본값 사용 (WebP, 100ms)
4. "🎬 애니메이션 생성" 버튼 클릭
5. 완료되면 프로그램 폴더 내 `animation/폴더명.gif` 또는 `animation/폴더명.webp` 파일 생성

#### 💡 초보자 팁
- **첫 실행이 느린 이유**: AI 모델을 인터넷에서 다운로드하기 때문
- **인터넷 필수**: 최초 실행 시에만 필요, 이후엔 오프라인 가능
- **처리 시간**: 이미지 크기와 개수에 비례 (작은 이미지로 먼저 테스트 권장)
- **결과물 위치**: 프로그램이 있는 폴더 내 `transparent/` 또는 `animation/` 폴더에 저장

## 🐛 문제 해결

### 자주 발생하는 오류

#### 1. "rembg 모듈을 찾을 수 없습니다"
```bash
pip install rembg
```

#### 2. "tkinterdnd2 모듈을 찾을 수 없습니다"
```bash
pip install tkinterdnd2
```

#### 3. Alpha Matting 오류
- 자동 설치를 승인하거나
- 수동으로 설치:
```bash
pip install pymatting opencv-python scipy
```

#### 4. 메모리 부족
- 이미지 크기를 줄이거나
- 리사이즈 옵션 사용
- 더 가벼운 모델(u2netp) 사용

#### 5. 처리 속도 느림
- Alpha Matting 비활성화
- 더 빠른 모델 선택 (u2netp)
- WebP method 값 낮추기 (현재 4)

### 시스템 요구사항
- **RAM**: 최소 4GB, 권장 8GB 이상
- **저장공간**: 약 2-3GB (AI 모델 다운로드)
- **인터넷**: 최초 실행 시 모델 다운로드용

## 📝 라이선스
이 프로젝트는 개인 및 교육 목적으로 자유롭게 사용 가능합니다.

## 🤝 기여
버그 리포트나 기능 제안은 언제든 환영합니다!

---
**개발자**: Noel Kim
**버전**: 1.0  
**최종 업데이트**: 2025년 8월
